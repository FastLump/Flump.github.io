<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Brian Buccola">
  <title>Pandoc, MathJax, Google fonts, and HTTPS - Brian Buccola</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../style.css">
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  <!-- Warning: Do not edit this file; it will be overwritten during blog rebuild. -->
  <meta name="description" content="Brian Buccola's personal blog">
  <meta name="keywords" content="Brian Buccola,linguistics,McGill University">
  <link rel="icon" href="/">
  <link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=PT+Mono:400,700,400italic" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Droid+Sans+Mono" rel="stylesheet" type="text/css">
  
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38439922-1']);
      _gaq.push(['_trackPageview']);
  
      (function() {
       var ga = document.createElement('script');
       ga.type = 'text/javascript';
       ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0];
       s.parentNode.insertBefore(ga, s);
       })();
  </script>
</head>
<body>
<!-- Warning: Do not edit this file; it will be overwritten during blog rebuild. -->
<h1 class="blog_title">Brian Buccola</h1>
<h4 class="blog_subtitle">logic, language, linux</h4>

<a class="return_to_index" href="../index.html">Back to index</a>
<h1 class="post_title">Pandoc, MathJax, Google fonts, and HTTPS</h1>
<p class="date">January 06, 2015</p>
<!-- begin metadata
title: Pandoc, MathJax, Google fonts, and HTTPS
date: 2015-01-06 13:25
end metadata -->
<p><strong>tl;dr</strong> For any secure (<code>https</code>) webpage with URLs in its source code to Google fonts or MathJax, those URLs must <em>also</em> be secure (<code>https</code>); otherwise, the fonts, <span class="math">\(\LaTeX{}\)</span>, etc. won’t render.</p>
<p>It’s been nearly a year since I last posted. One of my resolutions this year (my dissertation year!) is to write more, including on this blog. Ideally I’d write about semantics, but for now, just to get back into the swing of things, I’ll be happy to write about anything. To that end, here’s a post.</p>
<p>I just upgraded <a href="http://johnmacfarlane.net/pandoc/">pandoc</a> yesterday and decided to rebuild my blog to see if any changes would occur. (I write my blog in <a href="http://daringfireball.net/projects/markdown/">markdown</a> and then convert to html using pandoc, so basically I reconverted all my posts markdown -&gt; html.) Aside from the copyright changing from “2012–2014” to “2012–2015”, there was only one subtle, but substantial change, and that has to do with <a href="http://www.mathjax.org/">MathJax</a>.</p>
<p>MathJax is “an open source JavaScript display engine for mathematics that works in all browsers”. For example, it renders the html code <code>\(f(x) = x^2 + 4x - 3\)</code> into <span class="math">\(f(x) = x^2 + 4x - 3\)</span>. The stuff between <code>\(...\)</code> is <span class="math">\(\LaTeX{}\)</span> code, and <code>\(...\)</code> are the delimiters that MathJax looks out for. But actually, since I write my blog in markdown, I delimit <span class="math">\(\LaTeX{}\)</span> code using <code>$...$</code> (just like in <span class="math">\(\LaTeX{}\)</span> itself) since that’s what <em>pandoc</em> looks out for. In other words:</p>
<ol type="1">
<li>Write in markdown: <code>$f(x) = x^2 + 4x - 3$</code></li>
<li>Markdown becomes html (via pandoc): <code>\(f(x) = x^2 + 4x -3\)</code></li>
<li>Html becomes pretty (via mathjax): <span class="math">\(f(x) = x^2 + 4x -3\)</span></li>
</ol>
<p>MathJax is run as a script within the html source code. All you need is something like this, which links to some MathJax JavaScript:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;http://cdn.mathjax.org/mathjax/...&quot;</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></code></pre>
<p>(The full MathJax source URL is <a href="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">here</a>.)</p>
<p>The pandoc option <code>--mathjax</code> is supposed to automagically add the source URL, and it did, until the recent pandoc update. After the update, I noticed that the <code>http:</code> part was completely missing. <a href="https://github.com/jgm/pandoc/issues/1847">Apparently</a>, this isn’t really a bug; it was removed for principled reasons. The solution, I thought, was simply to change from using <code>--mathjax</code> to explicitly using</p>
<pre><code>--mathjax=&quot;http://cdn.mathjax.org/mathjax/...&quot;</code></pre>
<p>I tried that, and it worked! At least, on my <em>local</em> copy of the blog (<code>file:///home/brian/blog/...</code>). It did <em>not</em> work when I pushed the changes to github (<code>http://brianbuccola.github.io/blog/...</code>). The MathJax wasn’t rendering there. Huh.</p>
<p>I also noticed something else: my Google fonts were rendering on my local copy of my blog, but not on the GitHub blog. Were the issues related? Yes, they were. Here’s how.</p>
<p>I use the Firefox extension HTTPS-Everywhere, which tries to use the more secure <code>https://blah.com/</code> instead of <code>http://blah.com/</code> whenever possible. It turns out that when using the secure version of my blog, <code>https://brianbuccola.github.io/</code>, any insecure (<code>http</code>) Google font URLs or MathJax URLs <em>won’t work</em>. They need to all be changed to <code>https</code>. So that’s what I did</p>
<pre><code>--mathjax=&quot;https://cdn.mathjax.org/mathjax/...&quot;</code></pre>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;https://cdn.mathjax.org/mathjax/...&quot;</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></code></pre>
<p>and voilà, everything works again.</p>
<p>Moreover, using <code>https</code> URLs for Google fonts and MathJax <em>still</em> works when using the normal <code>http</code> version of my blog. So as far as I can tell, there’s no downside to always using the secure <code>https</code> URLs in your html source code, as far as text rendering goes.</p>
<!-- Warning: Do not edit this file; it will be overwritten during blog rebuild. -->
<hr class="footer"/>
<p class="footer">
<a rel="license" target="_blank"
href="http://creativecommons.org/licenses/by/3.0/">
<img alt="Creative Commons License" style="border-width:0"
src="http://i.creativecommons.org/l/by/3.0/80x15.png" /></a><br>
2012-2015 &ndash; Brian Buccola<br>
Powered by
    <a target="_blank" href="http://johnmacfarlane.net/pandoc/">Pandoc</a>,
    <a target="_blank" href="http://www.gnu.org/software/bash/">Bash</a>, and
    <a target="_blank" href="https://github.com/">GitHub</a>.
Source code available
    <a target="_blank" href="https://github.com/brianbuccola/brianbuccola.github.io">here</a>.
</p>
</body>
</html>
