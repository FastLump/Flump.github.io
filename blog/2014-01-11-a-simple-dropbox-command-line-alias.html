<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Brian Buccola">
  <title>A simple Dropbox command-line alias - Brian Buccola</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="../style.css">
  <!-- Warning: Do not edit this file; it will be overwritten during blog rebuild. -->
  <meta name="description" content="Brian Buccola's personal blog">
  <meta name="keywords" content="Brian Buccola,linguistics,McGill University">
  <link rel="icon" href="/">
  <link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=PT+Mono:400,700,400italic" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Droid+Sans+Mono" rel="stylesheet" type="text/css">
  
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38439922-1']);
      _gaq.push(['_trackPageview']);
  
      (function() {
       var ga = document.createElement('script');
       ga.type = 'text/javascript';
       ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0];
       s.parentNode.insertBefore(ga, s);
       })();
  </script>
</head>
<body>
<!-- Warning: Do not edit this file; it will be overwritten during blog rebuild. -->
<h1 class="blog_title">Brian Buccola</h1>
<h4 class="blog_subtitle">logic, language, linux</h4>

<a class="return_to_index" href="../index.html">Back to index</a>
<h1 class="post_title">A simple Dropbox command-line alias</h1>
<p class="date">January 11, 2014</p>
<!-- begin metadata
title: A simple Dropbox command-line alias
date: 2014-01-11 09:57
end metadata -->
<p>Dropbox has a useful but rather simplistic command-line interface, which I use almost exclusively. The reason I call it simplistic is that when you start Dropbox with <code>dropbox start</code>, all you see is</p>
<pre><code>$ dropbox start
Starting...Done!
$</code></pre>
<p>It starts Dropbox then brings you right back to the command-line prompt, at which point you have no idea what Dropbox is doing in the background. For me it’s important to know when Dropbox is finished syncing because I prefer to leave Dropbox off otherwise; that is, once the sync is done, I want to know that and then stop Dropbox.</p>
<p>There is a command <code>dropbox status</code>, but all that does is check the status (whether Dropbox is idle, uploading, downloading, indexing, etc.) at the <em>particular</em> moment you call <code>dropbox status</code>, and that’s it. I could of course keep calling <code>dropbox status</code> until it starts to return <code>Idle</code> every time</p>
<pre><code>$ dropbox status
Connecting...
$ dropbox status
Initializing...
$ dropbox status
Starting...
$ dropbox status
Downloading file list...
$ dropbox status
Updating (4 files)
Indexing (4 files)
$ dropbox status
Idle
$ dropbox status
Idle</code></pre>
<p>but there is an easier way to do this: the Linux command <code>watch</code>, which “execute[s] a program periodically, showing output fullscreen.” Suppose I want to check Dropbox’s status every one second. Then I just run</p>
<pre><code>watch -n1 dropbox status</code></pre>
<p>(The option <code>-n1</code> is short for <code>--interval 1</code> and always refers to seconds.)</p>
<p>To stop watching the program (to exit <code>watch</code>), just hit <code>Ctrl-C</code>.</p>
<p>When I run Dropbox, I basically just want to start it, watch what it does until it returns <code>Idle</code> every time, and then stop Dropbox. Here is simple alias (to put in <code>.bashrc</code> or <code>.zshrc</code> or whatever) that lets me do that:</p>
<pre><code>alias db=&#39;dropbox start &amp;&amp; watch -n1 dropbox status &amp;&amp; dropbox stop&#39;</code></pre>
<p>With this alias, I just type <code>db</code> at the command line, watch what Dropbox does until I keep seeing <code>Idle</code>, hit <code>Ctrl-C</code>, and then Dropbox stops automatically.</p>
<!-- Warning: Do not edit this file; it will be overwritten during blog rebuild. -->
<hr class="footer"/>
<p class="footer">
<a rel="license" target="_blank"
href="http://creativecommons.org/licenses/by/3.0/">
<img alt="Creative Commons License" style="border-width:0"
src="http://i.creativecommons.org/l/by/3.0/80x15.png" /></a><br>
2012-2015 &ndash; Brian Buccola<br>
Powered by
    <a target="_blank" href="http://johnmacfarlane.net/pandoc/">Pandoc</a>,
    <a target="_blank" href="http://www.gnu.org/software/bash/">Bash</a>, and
    <a target="_blank" href="https://github.com/">GitHub</a>.
Source code available
    <a target="_blank" href="https://github.com/brianbuccola/brianbuccola.github.io">here</a>.
</p>
</body>
</html>
