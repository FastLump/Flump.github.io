<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>Brian Buccola</title>
    <link href="https://brianbuccola.com//atom.xml" rel="self" />
    <link href="https://brianbuccola.com/" />
    <id>https://brianbuccola.com//atom.xml</id>
    <author>
        <name>Brian Buccola</name>
        <email>brian.buccola@gmail.com</email>
    </author>
    <updated>2018-11-30T00:00:00Z</updated>
    <entry>
    <title>Benjamin Franklin on learning modern and ancient languages</title>
    <link href="https://brianbuccola.com//./benjamin-franklin-on-learning-modern-and-ancient-languages/" />
    <id>https://brianbuccola.com//./benjamin-franklin-on-learning-modern-and-ancient-languages/</id>
    <published>2018-11-30T00:00:00Z</published>
    <updated>2018-11-30T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>I’m currently reading <a href="https://www.gutenberg.org/files/20203/20203-h/20203-h.htm">Benjamin Franklin’s autobiography</a>, and as a former student of Latin, Greek, and (afterwards) Romance languages, I was struck by the following passage.</p>
<blockquote>
<p>I had begun in 1733 to study languages; I soon made myself so much a master of the French as to be able to read the books with ease. I then undertook the Italian. An acquaintance, who was also learning it, us’d often to tempt me to play chess with him. Finding this took up too much of the time I had to spare for study, I at length refus’d to play any more, unless on this condition, that the victor in every game should have a right to impose a task, either in parts of the grammar to be got by heart, or in translations, etc., which tasks the vanquish’d was to perform upon honour, before our next meeting. As we play’d pretty equally, we thus beat one another into that language. I afterwards with a little painstaking, acquir’d as much of the Spanish as to read their books also.</p>
<p>I have already mention’d that I had only one year’s instruction in a Latin school, and that when very young, after which I neglected that language entirely. But, when I had attained an acquaintance with the French, Italian, and Spanish, I was surpris’d to find, on looking over a Latin Testament, that I understood so much more of that language than I had imagined, which encouraged me to apply myself again to the study of it, and I met with more success, as those preceding languages had greatly smooth’d my way.</p>
<p>From these circumstances, I have thought that there is some inconsistency in our common mode of teaching languages. We are told that it is proper to begin first with the Latin, and, having acquir’d that, it will be more easy to attain those modern languages which are deriv’d from it; and yet we do not begin with the Greek, in order more easily to acquire the Latin. It is true that, if you can clamber and get to the top of a staircase without using the steps, you will more easily gain them in descending; but certainly, if you begin with the lowest you will with more ease ascend to the top; and I would therefore offer it to the consideration of those who superintend the education of our youth, whether, since many of those who begin with the Latin quit the same after spending some years without having made any great proficiency, and what they have learnt becomes almost useless, so that their time has been lost, it would not have been better to have begun with the French, proceeding to the Italian, etc.; for, tho’, after spending the same time, they should quit the study of languages and never arrive at the Latin, they would, however, have acquired another tongue or two, that, being in modern use, might be serviceable to them in common life.</p>
</blockquote>
<p>The idea to use the outcomes of chess games as a way to learn languages is pretty cool (and amusing), of course, but I was particularly struck by Franklin’s progressiveness regarding the classical languages. I can’t imagine that many people at that time shared that view.</p>]]></summary>
</entry>
<entry>
    <title>How to use Git and Dropbox together</title>
    <link href="https://brianbuccola.com//./how-to-use-git-and-dropbox-together/" />
    <id>https://brianbuccola.com//./how-to-use-git-and-dropbox-together/</id>
    <published>2018-08-30T00:00:00Z</published>
    <updated>2018-08-30T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p><strong>Problem</strong>: You and some colleagues are working on a new project together (e.g. writing a new paper). You use <a href="https://git-scm.com/">Git</a> to version-control your work and sync it to the cloud (with GitHub or similar), but your colleagues use Dropbox.</p>
<p>What to do? Abandon Git when collaborating? (No!) Force your collaborators to learn Git? (Ye… No!)</p>
<p><strong>Solution</strong>: Use both! All you need to do is tell Dropbox to ignore all Git-specific files, and tell Git to ignore all Dropbox-specific files. While that sounds pretty simple, there are a few <a href="#important-warning">important caveats</a> to watch out for. Here’s how to do it.</p>
<h2 id="step-1-get-the-dropbox-command-line-program">Step 1: Get the Dropbox command-line program</h2>
<p>The first thing you’ll need is the Dropbox command-line program. Depending on your Linux distribution, this program may already come with your Dropbox package, or it may be available as a separate package (on Arch Linux, the package is separate and is called <a href="https://aur.archlinux.org/packages/dropbox-cli/"><code>dropbox-cli</code></a>). Or you can just download <a href="https://www.dropbox.com/download?dl=packages/dropbox.py">the Python script</a> directly. For concreteness, I’m going to call this program <code>dropbox</code>, but on your machine it may be called <code>dropbox.py</code>, <code>dropbox-cli</code> (Arch Linux), etc.</p>
<p><code>dropbox</code> provides a number of commands. Run <code>dropbox help</code> to see them all.</p>
<p>The one we care about is the <code>exclude</code> command, which allows you to exclude specific files/directories from sync’ing to Dropbox.</p>
<p>You can run <code>dropbox exclude list</code> to list all excluded files, <code>dropbox exclude add [file] ...</code> to add a file to the exclude list, or <code>dropbox exclude remove [file] ...</code> to remove a file from the exclude list.</p>
<p>By the way, even though <code>dropbox help exclude</code> mentions only directories, you can actually exclude both directories and plain files. (That’s probably because on Unix, <a href="https://en.wikipedia.org/wiki/Everything_is_a_file">everything is a file</a>.)</p>
<p>See <a href="https://www.dropboxwiki.com/tips-and-tricks/using-the-official-dropbox-command-line-interface-cli">this article</a> on the Dropbox wiki for more information.</p>
<h2 id="step-2-start-dropbox">Step 2: Start Dropbox</h2>
<p>At this point, you can already start Dropbox. So, in a terminal, run:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">dropbox</span> start</a></code></pre></div>
<p><strong>Protip</strong>: Use the command</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">$ <span class="ex">dropbox</span> start <span class="kw">&amp;&amp;</span> <span class="ex">watch</span> -n1 dropbox status <span class="kw">&amp;&amp;</span> <span class="ex">dropbox</span> stop</a></code></pre></div>
<p>to continually (every second) watch the Dropbox status, or better yet, create an alias for it called <code>db</code>, as I previously described in <a href="/a-simple-dropbox-command-line-alias/">this post</a>.</p>
<h2 id="step-3-start-a-new-project">Step 3: Start a new project</h2>
<p>Now we start our new project, e.g. LaTeX manuscript. (If you used the <code>db</code> alias/command above, then fire up a new terminal.) Let’s call the project <code>project</code>, because we’re not creative:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1">$ <span class="fu">mkdir</span> ~/Dropbox/project</a>
<a class="sourceLine" id="cb3-2" title="2">$ <span class="bu">cd</span> ~/Dropbox/project</a></code></pre></div>
<p>From here on out, I’m going to assume that every command is run from inside <code>~/Dropbox/project</code>.</p>
<h2 id="step-4-exclude-git-files-from-dropbox-sync">Step 4: Exclude Git files from Dropbox sync</h2>
<p>With Dropbox running, we’re going to preemptively exclude two Git-related things: the directory <code>.git</code> and the file <code>.gitignore</code>, both of which will be created in the next step.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Run this from inside ~/Dropbox/project!</span></a>
<a class="sourceLine" id="cb4-2" title="2">$ <span class="ex">dropbox</span> exclude add .git .gitignore</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="ex">Excluded</span>:</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="ex">.git</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="ex">.gitignore</span></a></code></pre></div>
<p>Dropbox confirms that it excluded the files, but you can double-check that it worked by running:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1">$ <span class="ex">dropbox</span> exclude list</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="ex">Excluded</span>:</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="ex">.git</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="ex">.gitignore</span></a></code></pre></div>
<p>Note that <code>.git</code> and <code>.gitignore</code> don’t even exist yet! In other words, you can tell Dropbox to exclude stuff before even creating it. In fact, you <em>should</em> do this. More about that <a href="#important-warning">at the end</a>.</p>
<h2 id="step-5-exclude-dropbox-files-from-git-tracking">Step 5: Exclude Dropbox files from Git tracking</h2>
<p>Now we turn <code>project</code> into a Git repository in the usual way:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1">$ <span class="fu">git</span> init</a></code></pre></div>
<p>This creates the directory <code>.git</code>. Since we previously excluded this directory from Dropbox sync, Dropbox won’t actually do anything here.</p>
<p>If you check Git’s status:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1">$ <span class="fu">git</span> status</a></code></pre></div>
<p>you may see an untracked file called <code>.dropbox</code>. We want Git to ignore that, so we create the file <code>.gitignore</code> and add <code>.dropbox</code> to it:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1">$ <span class="bu">echo</span> <span class="st">&quot;.dropbox&quot;</span> <span class="op">&gt;</span> .gitignore</a></code></pre></div>
<p>Again, since we previously excluded <code>.gitignore</code>, Dropbox still won’t do anything.</p>
<p>Now, when you run <code>git status</code>, you won’t see <code>.dropbox</code>.</p>
<p><strong>Note</strong>: This step may no longer be necessary. When I tested this just now, Dropbox did not create a <code>.dropbox</code> file, and all the <code>.dropbox</code> files in my Dropbox are many months old. So it may be that the newest version of Dropbox no longer creates a <code>.dropbox</code> file (or that the <code>.dropbox</code> file is coming from one of my collaborators’ versions of Dropbox). Still, it can’t hurt to add it to your <code>.gitignore</code>.</p>
<h2 id="step-6-profit">Step 6: Profit</h2>
<p>Now you can work as usual, sync’ing to Dropbox and committing changes to Git as you normally would. The two will not step on each other’s toes.</p>
<p>The really nice thing about this method is that when you sync your collaborators’ changes to your machine over Dropbox, you can run</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1">$ <span class="fu">git</span> status</a></code></pre></div>
<p>to see which files were added, deleted, or changed, as well as</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1">$ <span class="fu">git</span> diff</a></code></pre></div>
<p>or (my preference)</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" title="1">$ <span class="fu">git</span> diff --word-diff=color</a></code></pre></div>
<p>to see <em>exactly</em> what changes were made by your collaborators since your last Git commit.</p>
<p><strong>Protip</strong>: Before doing new work on your project, and definitely before sync’ing over Dropbox, I highly recommend checking <a href="https://www.dropbox.com/events" class="uri">https://www.dropbox.com/events</a> to see if anyone has made any changes. If so, then pull in the changes first, review and commit them with Git:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1">$ <span class="fu">git</span> commit -am <span class="st">&quot;Merge Alice&#39;s changes&quot;</span></a></code></pre></div>
<p>and then start your work. (Otherwise, Dropbox will create a conflicted copy, and then you’ll have to manually merge your conflicted copy with your collaborator’s copy.)</p>
<h2 id="important-warning">Important warning!</h2>
<p>For some reason that I don’t understand at all, if you run:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb13-1" title="1">$ <span class="ex">dropbox</span> exclude add foo</a></code></pre></div>
<p>and <code>foo</code> already exists, then Dropbox will actually <em>delete</em> <code>foo</code>! Therefore, if you decide you want to exclude a file from sync’ing over Dropbox, but it’s a file that you want to keep locally, be sure to <em>move</em> the file out of your project folder first (or make a copy of it).</p>
<p>For example, let’s say that I’ve created a file <code>notes</code> that contains my own notes for a collaborative project. My colleagues don’t care to see that, so I decide to exclude it:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># From inside ~/Dropbox/project!</span></a>
<a class="sourceLine" id="cb14-2" title="2">$ <span class="fu">mv</span> notes /tmp                # move notes to /tmp</a>
<a class="sourceLine" id="cb14-3" title="3">$ <span class="ex">dropbox</span> start                # start Dropbox, if not already running</a>
<a class="sourceLine" id="cb14-4" title="4">$ <span class="ex">dropbox</span> exclude add notes    # exclude notes</a>
<a class="sourceLine" id="cb14-5" title="5">$ <span class="fu">mv</span> /tmp/notes .              # move notes back to project</a></code></pre></div>
<p>If you accidentally <code>exclude add</code> a file that already exists, and Dropbox deletes it, don’t worry: you can manually download the deleted file by going to the Dropbox website, navigating to your project, and making sure to “Show deleted files”. Once you’ve downloaded the deleted file, move it into your <code>project</code> directory, and Dropbox won’t do anything with it, since it’s been excluded.</p>
<h2 id="step-7-bonus-multiple-versions-of-a-file-or-directory">Step 7 (bonus): Multiple versions of a file or directory</h2>
<p>Since your colleagues don’t use Git, they may be in the habit of creating entirely new files or directories when they implement (major) changes, which on first glance may look disastrous.</p>
<p>For example, suppose your project starts with the following state:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb15-1" title="1">$ <span class="fu">ls</span> -a project</a>
<a class="sourceLine" id="cb15-2" title="2"><span class="ex">./</span> ../ .git/ .gitignore paper.tex paper.pdf</a></code></pre></div>
<p>You start Dropbox, and then when you run <code>git status</code>, you notice that all your files have been deleted, and in their place you now have two untracked directories!</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb16-1" title="1">$ <span class="fu">git</span> status</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="ex">Changes</span> not staged for commit:</a>
<a class="sourceLine" id="cb16-3" title="3"></a>
<a class="sourceLine" id="cb16-4" title="4">    <span class="ex">deleted</span>: paper.tex</a>
<a class="sourceLine" id="cb16-5" title="5"></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="ex">Untracked</span> files:</a>
<a class="sourceLine" id="cb16-7" title="7"></a>
<a class="sourceLine" id="cb16-8" title="8">    <span class="ex">v1/</span></a>
<a class="sourceLine" id="cb16-9" title="9">    <span class="ex">v2/</span></a></code></pre></div>
<p>What happened, of course, was that your colleague moved the old <code>paper.tex</code> and <code>paper.pdf</code> into a new directory called <code>v1</code>, copied them into another new directory called <code>v2</code>, and then made their changes in the <code>v2</code> version.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb17-1" title="1">$ <span class="fu">ls</span> -a project</a>
<a class="sourceLine" id="cb17-2" title="2"><span class="ex">./</span> ../ .git/ .gitignore v1/ v2/</a>
<a class="sourceLine" id="cb17-3" title="3">$ <span class="fu">ls</span> -a v1 v2</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="ex">v1</span>:</a>
<a class="sourceLine" id="cb17-5" title="5"><span class="ex">./</span>  ../  paper.pdf  paper.tex</a>
<a class="sourceLine" id="cb17-6" title="6"></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="ex">v2</span>:</a>
<a class="sourceLine" id="cb17-8" title="8"><span class="ex">./</span>  ../  paper.pdf  paper.tex</a></code></pre></div>
<p>Assuming they haven’t made any filename changes, all you have to do is move <code>.git</code> and <code>.gitignore</code> from the top-level <code>project</code> directory to the new <code>v2</code> directory, and then run <code>git status</code> to see the new changes.</p>
<p>However, <em>before</em> you do that, make sure to exclude <code>v2/.git</code> and <code>v2/.gitignore</code>!</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb18-1" title="1">$ <span class="ex">dropbox</span> exclude add v2/.git v2.gitignore</a>
<a class="sourceLine" id="cb18-2" title="2"><span class="ex">Excluded</span>:</a>
<a class="sourceLine" id="cb18-3" title="3"><span class="ex">v2/.git</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="ex">v2/.gitignore</span></a>
<a class="sourceLine" id="cb18-5" title="5">$ <span class="fu">mv</span> .git .gitignore v2</a>
<a class="sourceLine" id="cb18-6" title="6">$ <span class="bu">cd</span> v2</a>
<a class="sourceLine" id="cb18-7" title="7">$ <span class="fu">git</span> status</a></code></pre></div>
<p>You can also now un-exclude the old top-level Git files:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb19-1" title="1">$ <span class="bu">cd</span> .. <span class="co"># move back to ~/Dropbox/project</span></a>
<a class="sourceLine" id="cb19-2" title="2">$ <span class="ex">dropbox</span> exclude remove .git .gitignore</a>
<a class="sourceLine" id="cb19-3" title="3"><span class="ex">No</span> longer excluded:</a>
<a class="sourceLine" id="cb19-4" title="4"><span class="ex">.git</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="ex">.gitignore</span></a></code></pre></div>]]></summary>
</entry>
<entry>
    <title>How to install xmonad and xmobar via stack</title>
    <link href="https://brianbuccola.com//./how-to-install-xmonad-and-xmobar-via-stack/" />
    <id>https://brianbuccola.com//./how-to-install-xmonad-and-xmobar-via-stack/</id>
    <published>2017-10-04T00:00:00Z</published>
    <updated>2017-10-04T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>Arch Linux recently changed their Haskell packages (no more static linking), which broke a bunch of stuff. Specifically, upgrading <code>xmonad-0.13-8</code> → <code>xmonad-0.13-9</code> produces errors when recompiling xmonad, and only downgrading seems to fix the issue; and using <code>cabal-install</code> (<code>cabal install xmonad</code>) with Arch’s <code>ghc</code> likewise produces errors, failing to install xmonad. For those of you coming from Google, the errors are of the format <code>Could not find module ...</code>. See <a href="https://bbs.archlinux.org/viewtopic.php?pid=1739920">here</a> and <a href="https://www.reddit.com/r/xmonad/comments/73z1ew/could_not_find_module/">here</a>, for example.</p>
<p>In addition, Arch’s xmobar (with <code>xmonad-0.13-8</code>) has been crashing sporadically (segmentation faults), for some reason. See <a href="https://www.reddit.com/r/archlinux/comments/72hf42/xmonadcontrib013_dependency/">here</a>, for instance.</p>
<p>In this post, I’ll explain how I got xmonad (and xmonad-contrib) and xmobar installed and working – and no xmobar crashes, so far – via <a href="https://www.haskellstack.org/">stack</a>. I’ll try to keep it as short and simple as possible. No in-depth explanations; just a straightforward, step-by-step rundown of what I did. The usual disclaimers (YMMV, etc.) apply.</p>
<p>I’ll assume you already have an <code>~/.xmonad</code> directory with an <code>xmonad.hs</code> config file. If you don’t use xmobar, this post can still be useful; just ignore the lines/steps that refer to xmobar.</p>
<h2 id="step-1-get-stack">Step 1: Get stack</h2>
<p>There are couple ways to get stack. I installed <a href="https://aur.archlinux.org/packages/stack-static/">stack-static</a> from the AUR, because it doesn’t come with any Haskell dependencies.</p>
<p>If you don’t care about tracking stack with your package manager, then, as the <a href="https://docs.haskellstack.org/en/stable/README/#how-to-install">stack how-to-install</a> explains, just run</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">curl</span> -sSL https://get.haskellstack.org/ <span class="kw">|</span> <span class="fu">sh</span></a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">wget</span> -qO- https://get.haskellstack.org/ <span class="kw">|</span> <span class="fu">sh</span></a></code></pre></div>
<h2 id="step-2-install-ghc-with-stack">Step 2: Install GHC with stack</h2>
<p>To build and install Haskell packages, we need GHC. Simply run</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">stack</span> setup</a></code></pre></div>
<p>to install GHC into <code>~/.stack</code>. Useful for the kind of sandboxing projects that we’re doing with xmonad.</p>
<p><strong>NB:</strong> You can run <code>stack ghc</code> to do things with GHC, <code>stack ghci</code> to fire up interactive GHC, and so on.</p>
<h2 id="step-3-get-xmonad-xmonad-contrib-and-xmobar">Step 3: Get xmonad, xmonad-contrib, and xmobar</h2>
<p>We’ll be turning our <code>~/.xmonad</code> directory into a stack project, so first, head over there.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="bu">cd</span> ~/.xmonad</a></code></pre></div>
<p>For the remainder of this post, I’ll assume you’re inside <code>~/.xmonad</code>.</p>
<p>Next, download the xmonad, xmonad-contrib, and xmobar Git repositories, which contain the <code>.cabal</code> and <code>.yaml</code> files that stack will look for in the next step. I like to add <code>-git</code> to their directory names, just as a reminder.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># From inside ~/.xmonad.</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="fu">git</span> clone <span class="st">&quot;https://github.com/xmonad/xmonad&quot;</span> xmonad-git</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="fu">git</span> clone <span class="st">&quot;https://github.com/xmonad/xmonad-contrib&quot;</span> xmonad-contrib-git</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="fu">git</span> clone <span class="st">&quot;https://github.com/jaor/xmobar&quot;</span> xmobar-git</a></code></pre></div>
<p>Your <code>~/.xmonad</code> directory should now contain <code>xmonad-git</code>, <code>xmonad-contrib-git</code>, and <code>xmobar-git</code>, each of which contains a <code>.cabal</code> file and a <code>.yaml</code> file.</p>
<h2 id="step-4-initialize-stack">Step 4: Initialize stack</h2>
<p>This step is easy: just run</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># From inside ~/.xmonad.</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="ex">stack</span> init</a></code></pre></div>
<p>Stack will find the <code>.cabal</code> and <code>.yaml</code> files and auto-create the file <code>stack.yaml</code> for you. It’ll look like this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># ~/.xmonad/stack.yaml</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="fu">resolver:</span><span class="at"> lts-9.6</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="fu">packages:</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="kw">-</span> xmobar-git</a>
<a class="sourceLine" id="cb7-5" title="5"><span class="kw">-</span> xmonad-git</a>
<a class="sourceLine" id="cb7-6" title="6"><span class="kw">-</span> xmonad-contrib-git</a>
<a class="sourceLine" id="cb7-7" title="7"><span class="fu">extra-deps:</span><span class="at"> </span><span class="kw">[]</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="fu">flags:</span><span class="at"> </span><span class="kw">{}</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="fu">extra-package-dbs:</span><span class="at"> </span><span class="kw">[]</span></a></code></pre></div>
<p>At this point, you can modify <code>stack.yaml</code> to add flags, etc. The only change I made was to add the flag <code>all_extensions</code> to xmobar, by changing</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb8-1" title="1"><span class="fu">flags:</span><span class="at"> </span><span class="kw">{}</span></a></code></pre></div>
<p>to</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb9-1" title="1"><span class="fu">flags:</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="fu">xmobar:</span></a>
<a class="sourceLine" id="cb9-3" title="3">    <span class="fu">all_extensions:</span><span class="at"> </span><span class="ch">true</span></a></code></pre></div>
<p>This flag provides all the xmobar bells &amp; whistles, like support for xft, mpd, battery, wifi, etc.</p>
<p><strong>NB:</strong> If you add the <code>with_iwlib</code> flag (or <code>all_extensions</code>), you’ll need to also install the <a href="http://www.hpl.hp.com/personal/Jean_Tourrilhes/Linux/Tools.html">iwlib</a> C library and headers. In Arch Linux, just install <code>wireless_tools</code>; in Debian-based systems, <code>libiw-dev</code>. Or, in your <code>stack.yaml</code>, change</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb10-1" title="1"><span class="fu">extra_deps:</span><span class="at"> </span><span class="kw">[]</span></a></code></pre></div>
<p>to</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb11-1" title="1"><span class="fu">extra_deps:</span></a>
<a class="sourceLine" id="cb11-2" title="2">    <span class="kw">-</span> iwlib-0.1.0</a></code></pre></div>
<p>(The specific version you’ll need will change over time. If <code>stack install</code> from step 5 produces an error, just see what stack recommends.)</p>
<h2 id="step-5-build-and-install-everything">Step 5: Build and install everything</h2>
<p>Next, run</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># From inside ~/.xmonad.</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="ex">stack</span> install</a></code></pre></div>
<p>to build and install xmonad, xmonad-contrib, and xmobar (and all their dependencies). You’ll now have two new binaries, <code>xmonad</code> and <code>xmobar</code>, installed into <code>~/.local/bin</code>.</p>
<p><strong>NB:</strong> You’ll want to add <code>~/.local/bin</code> to your <code>PATH</code>, if it isn’t already. (If you use a login manager, see Step 9 below.)</p>
<h2 id="step-6-write-a-build-file">Step 6: Write a build file</h2>
<p>Since we’re doing everything via stack, rather than ghc directly, <code>xmonad --recompile</code> won’t quite work yet. As of xmonad 0.13, we can write a custom build script, named <code>build</code> and located inside <code>~/.xmonad</code>, which will use stack ghc to recompile xmonad. (Borrowed from <a href="https://github.com/pbrisbin/dotfiles/blob/master/xmonad/build">pbrisbin</a>.)</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># ~/.xmonad/build</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="co">#!/bin/sh</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="bu">exec</span> stack ghc -- \</a>
<a class="sourceLine" id="cb13-4" title="4">  --make xmonad.hs \</a>
<a class="sourceLine" id="cb13-5" title="5">  -i \</a>
<a class="sourceLine" id="cb13-6" title="6">  -ilib \</a>
<a class="sourceLine" id="cb13-7" title="7">  -fforce-recomp \</a>
<a class="sourceLine" id="cb13-8" title="8">  -main-is main \</a>
<a class="sourceLine" id="cb13-9" title="9">  -v0 \</a>
<a class="sourceLine" id="cb13-10" title="10">  -o <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></a></code></pre></div>
<p>Make sure it’s executable:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="fu">chmod</span> a+x build</a></code></pre></div>
<h2 id="step-7-recompile-and-restart-xmonad">Step 7: Recompile and restart xmonad</h2>
<p>You should now be able to recompile and restart xmonad (and xmobar) with</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb15-1" title="1"><span class="ex">xmonad</span> --recompile <span class="kw">&amp;&amp;</span> <span class="ex">xmonad</span> --restart</a></code></pre></div>
<p><strong>NB:</strong> I had to restart my computer in order for xmobar to start up properly – probably because xmonad couldn’t find the xmobar binary.</p>
<h2 id="step-8-updating">Step 8: Updating</h2>
<p>Whenever you update your xmonad, xmonad-contrib, or xmobar repositories, just <code>cd ~/.xmonad</code> and run</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb16-1" title="1"><span class="ex">stack</span> install</a></code></pre></div>
<p>to rebuild and reinstall everything.</p>
<p><strong>NB:</strong> If you add a new flag or extra dependencies (in <code>stack.yaml</code>), you may need to run <code>stack clean</code> first.</p>
<h2 id="step-9-loose-ends-with-login-managers">(Step 9: Loose ends with login managers)</h2>
<p>If you use a login manager, such as LightDM, then you may need to take some additional steps. I don’t use a login manager, nor do I know much about them, but I’ll use LightDM as the working example since I’ve read a little about it.</p>
<p>First off, LightDM uses <code>*.desktop</code> files located <code>/usr/share/xsessions</code> to know which desktop environments (or window managers) you have available to choose from. So, you’ll probably need to create <code>xmonad.desktop</code>. The xmonad package from the official Arch repos installs the following file, so you can just copy it verbatim and place it into <code>/usr/share/xsessions</code>:</p>
<pre class="desktop"><code>[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=Xmonad
Comment=Lightweight X11 tiled window manager written in Haskell
Exec=xmonad
Icon=xmonad
Terminal=false
StartupNotify=false
Categories=Application;</code></pre>
<p>Second, running <code>xmonad --recompile</code> may not work yet. If it doesn’t, make sure that you’ve added <code>~/.local/bin</code> to your <code>PATH</code> by adding it to one of your shell <em>profile</em> files, such as <code>~/.profile</code> or (if you only use one shell, e.g. Bash) <code>~/.bash_profile</code>, and <em>not</em> to your shell’s configuration file (e.g. <code>~/.bashrc</code>). The reason is that LightDM (and by extension xmonad) is invoked from a login shell, which sources <em>profile</em> files like <code>~/.profile</code>, but not (necessarily) shell config files like <code>~/.bashrc</code>. See <a href="https://superuser.com/questions/183870/difference-between-bashrc-and-bash-profile/183980#183980">this SE thread</a> and <a href="https://www.quora.com/What-is-profile-file-in-Linux">this Quora answer</a> to learn more about the difference.</p>
<p>If that still doesn’t work, then it’s possible that your login manager doesn’t even source <code>~/.profile</code> (see the end of the SE thread linked above). In that case, a possible fix is to just manually symlink <code>~/.local/bin/xmonad</code> to <code>/usr/bin</code> (since the latter is definitely in your <code>PATH</code>; thanks to Ashesh in the comments below for this fix):</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb18-1" title="1"><span class="fu">ln</span> -s ~/.local/bin/xmonad /usr/bin</a></code></pre></div>]]></summary>
</entry>
<entry>
    <title>Latin to English translation of McGill diploma</title>
    <link href="https://brianbuccola.com//./latin-to-english-translation-of-mcgill-diploma/" />
    <id>https://brianbuccola.com//./latin-to-english-translation-of-mcgill-diploma/</id>
    <published>2017-08-02T00:00:00Z</published>
    <updated>2017-08-02T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p style="text-align: center;">
NOS GUBERNATORES RECTOR SOCII<br> UNIVERSITATIS MCGILL<br> AD MONTEM REGIUM IN CANADA SITAE OMNIBUS AD QUOS HAE LITTERAE PERVENERINT SALUTEM. NOS UNIVERSITATIS GUBERNATORES RECTRIX SOCII TESTAMUR NOS<br> Brian Anthony Buccola<br> CUM CURRICULUM STUDIORUM PRAESCRIPTUM CUM INDUSTRIA CONFECERIT ET OMNES EXERCITATIONES QUAE EI SINT INIUNCTAE RITE PEREGERIT, CREAVISSE<br> DOCTOREM PHILOSOPHIAE<br> ATQUE EI OMNES HONORES IURA BENEFICIA QUAE AD ILLUM GRADUM PERTINEANT CONCESSISSE. QUOD AD CONFIRMANDUM HAS LITTERAS SIGILLO UNIVERSITATIS CONSIGNANDAS ET NOMINA EORUM QUI RES ACADEMICAS ADMINISTRANT SUBSCRIBENDA CURAVIMUS. DATAE DIE VII MENSIS IUNII ANNI DOMINI MMXVI.
</p>
<p style="text-align: center;">
DECANUS · SCRIBUS MAXIMUS · RECTOR HONORARIUS · RECTRIX
</p>
<p>We – the Governors, the Chancellor, and the Associates of McGill University – located in Montreal, Canada, send greetings to all those whom this document reaches. We – the Governors, the Principal and Vice-Chancellor, and the Associates of the university – attest that, since he has completed the prescribed curriculum of study with diligence and has duly carried out all the training charged to him, we have made Brian Anthony Buccola a Doctor of Philosophy and have granted him all the honors, rights, and privileges pertaining to that degree. To confirm this, we have taken care that this document be signed with the seal of the university and that the names of those in charge of academic affairs be signed below. Dated June 7, 2016.</p>
<p>Dean · Secretary-General · Honourable Chancellor · Principal and Vice-Chancellor</p>
<p><strong>NB:</strong> I’ve translated the titles of the signatories by <a href="http://www.mcgill.ca/about/administration">looking their names up</a> and using their English titles. That’s why <em>RECTRIX</em> is translated as <em>Principal and Vice-Chancellor</em>, for instance. As for <em>SOCII</em>, I’m not sure if this refers to a specific body, with a specific title (e.g. the <a href="http://www.mcgill.ca/senate/">senate</a>). Assuming it doesn’t (otherwise, I would’ve expected <em>SENATUS</em>, for example), the word can be translated as <em>associates</em>, <em>members</em>, <em>fellows</em>, or similar.</p>]]></summary>
</entry>
<entry>
    <title>How to build and install st (suckless simple terminal) from source on Arch Linux</title>
    <link href="https://brianbuccola.com//./how-to-build-and-install-st-suckless-simple-terminal-from-source-on-arch-linux/" />
    <id>https://brianbuccola.com//./how-to-build-and-install-st-suckless-simple-terminal-from-source-on-arch-linux/</id>
    <published>2017-03-19T00:00:00Z</published>
    <updated>2017-03-19T00:00:00Z</updated>
    <summary type="html"><![CDATA[<h2 id="background">Background</h2>
<p><a href="http://st.suckless.org/"><em>st</em></a> (<em>simple terminal</em>), from the folks at <a href="http://suckless.org/">suckless</a>, is an extremely lightweight terminal emulator that also supports true color. It’s configured by editing a C header file, <code>config.h</code>, and then recompiling everything into a binary. For this reason, it doesn’t make sense to install st from the official repos (you’d just end up with a very basic, uncustomizable binary), nor does it really make sense to install it from the <a href="https://wiki.archlinux.org/index.php/Arch_User_Repository">AUR</a>, because you’ll inevitably want to modify the PKGBUILD to apply <a href="http://st.suckless.org/patches/">patches</a> and do other things. Instead, your best bet is to create your own personal PKGBUILD (or modify an existing, similar one), which will apply the patches you want, copy over your custom <code>config.h</code>, and build st, which you can then make into a package with <code>makepkg</code> and install with <code>pacman</code> as usual.</p>
<h2 id="building-and-installing-manually-from-source">Building and installing manually from source</h2>
<p>The first step is to decide whether you want to use the stable release (currently <a href="http://dl.suckless.org/st/st-0.7.tar.gz">st-0.7.tar.gz</a>) or the development version (<a href="http://git.suckless.org/st" class="uri">http://git.suckless.org/st</a>). I originally went with the development version, but I was unable to apply patches (because the patches were created for the stable release, and I couldn’t find any more up-to-date versions of the patches). Therefore, in the end, I decided to go with the stable release, which also has the advantage that my terminal, which I rely heavily on, won’t break any time soon.</p>
<h3 id="step-1-follow-the-installation-instructions">Step 1: Follow the installation instructions</h3>
<p>The first step (after untarring the tarball and <code>cd</code>-ing into the <code>st-x.x</code> directory) is to install st exactly as the <code>README</code> says:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb1-1" title="1">Installation</a>
<a class="sourceLine" id="cb1-2" title="2">------------</a>
<a class="sourceLine" id="cb1-3" title="3">Edit config.mk to match your local setup (st is installed into</a>
<a class="sourceLine" id="cb1-4" title="4">the /usr/local namespace by default).</a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6">Afterwards enter the following command to build and install st (if</a>
<a class="sourceLine" id="cb1-7" title="7">necessary as root):</a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="bn">    make clean install</span></a></code></pre></div>
<p>Literally all I did was run <code>sudo make clean install</code>, and it worked. I could run <code>st</code> no problem.</p>
<h3 id="step-2-configure-config.h-and-apply-some-patches">Step 2: Configure <code>config.h</code> and apply some patches</h3>
<p>Next, try and customize st a bit by editing <code>config.h</code> to your liking and applying some patches. Take note of exactly what you do. In my case, I applied the patches <a href="http://st.suckless.org/patches/scrollback">scrollback</a>, <a href="http://st.suckless.org/patches/hidecursor">hidecursor</a>, and <a href="http://st.suckless.org/patches/copyurl">copyurl</a>, by running <code>patch -Np1 -i &lt;patch&gt;</code> for each patch. Once you’re satisfied, it’s time to create a PKGBUILD.</p>
<h2 id="creating-a-pkgbuild">Creating a PKGBUILD</h2>
<p>First off, read the Arch Wiki entries on <a href="https://wiki.archlinux.org/index.php/PKGBUILD">PKGBUILD</a> and <a href="https://wiki.archlinux.org/index.php/Creating_packages">Creating packages</a>. You can either create one from scratch (while following the Arch Wiki), modify the skeleton PKGBUILD <code>/usr/share/pacman/PKGBUILD.proto</code>, or modify an actual existing PKGBUILD. I decided to opt for the latter, and the existing PKGBUILD I chose to modify was the obvious one: <code>st</code> itself from <code>community</code>.</p>
<p>There are a number of ways to acquire an official PKGBUILD. Traditionally, you’d go the <a href="https://wiki.archlinux.org/index.php/Arch_Build_System">ABS</a> route: install <code>abs</code>, clone the entire ABS tree (or at least the subtree of the repo containing <code>st</code>, i.e. <code>community</code>) onto <code>/var/abs</code>, then copy <code>/var/abs/community/st</code> over to something like <code>~/abs</code>.</p>
<p>However, nowadays there are tools like <a href="https://github.com/falconindy/asp">asp</a> and <a href="http://xyne.archlinux.ca/projects/pbget/">pbget</a> that let you acquire the contents (PKGBUILD, etc.) of a single package without cloning an entire repo tree. So that’s what I did:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">$ <span class="fu">mkdir</span> -p ~/.cache/asp</a>
<a class="sourceLine" id="cb2-2" title="2">$ <span class="fu">mkdir</span> -p ~/builds</a>
<a class="sourceLine" id="cb2-3" title="3">$ <span class="bu">cd</span> ~/builds</a>
<a class="sourceLine" id="cb2-4" title="4">$ <span class="ex">asp</span> export st</a>
<a class="sourceLine" id="cb2-5" title="5">$ <span class="bu">cd</span> st</a>
<a class="sourceLine" id="cb2-6" title="6">$ <span class="fu">ls</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="ex">config.h</span> PKGBUILD</a></code></pre></div>
<p>Here I’ve used <code>asp</code> to export the <code>st</code> package, which comes with <code>config.h</code> (the configuration file) and <code>PKGBUILD</code>, the PKGBUILD. Now I just need to edit <code>config.h</code> in the same way I did in step 2 (easy part), and modify the PKGBUILD to apply the three patches I want (slightly harder part).</p>
<p>There are four main changes I made to the PKGBUILD. First, I added an array <code>_patches</code> with links to the three patches I want to apply:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="va">_patches=(</span><span class="st">&quot;http://st.suckless.org/patches/st-scrollback-20170104-c63a87c.diff&quot;</span></a>
<a class="sourceLine" id="cb3-2" title="2">          <span class="st">&quot;http://st.suckless.org/patches/st-hidecursor-20160727-308bfbf.diff&quot;</span></a>
<a class="sourceLine" id="cb3-3" title="3">          <span class="st">&quot;http://st.suckless.org/patches/st-copyurl-20161105-8c99915.diff&quot;</span>)</a></code></pre></div>
<p>Second, I added the patches to the <code>source</code> array by adding <code>&quot;${_patches[@]}&quot;</code> to it…</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="va">source=(</span><span class="st">&quot;http://dl.suckless.org/st/</span><span class="va">$pkgname</span><span class="st">-</span><span class="va">$pkgver</span><span class="st">.tar.gz&quot;</span></a>
<a class="sourceLine" id="cb4-2" title="2">        <span class="st">&quot;config.h&quot;</span></a>
<a class="sourceLine" id="cb4-3" title="3">        <span class="st">&quot;</span><span class="va">${_patches[@]}</span><span class="st">&quot;</span>)</a></code></pre></div>
<p>…and of course added the patches’ corresponding hashes to the <code>md5sums</code> array. (<strong>Protip</strong>: Run <code>updpkgsums</code> to automatically do this.)</p>
<p>Third, it turned out that any patches which tried to patch <code>config.def.h</code> would lead to an error. This is because those patches — specifically, the scrollback and copyurl patches — define new functions (for scrolling back and for copying a URL) by modifying <code>st.c</code> and then bind keys to those functions by modifying <code>config.def.h</code>, but <code>config.def.h</code> is first overwritten by the custom <code>config.h</code> during the build stage, which later leads to a patch error. Therefore, I decided to (i) manually modify <code>config.h</code> to bind the relevant functions to some keys (easy), and then (ii) remove from those two patches the lines responsible for patching <code>config.def.h</code>, which happen to be the first 13 lines in the scrollback patch, and the first 12 lines in the copyurl patch:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># patch patches (don&#39;t let them patch config.def.h)</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="fu">sed</span> -i <span class="st">&#39;1,13d&#39;</span> <span class="st">&quot;</span><span class="va">$srcdir</span><span class="st">/</span><span class="va">$(</span><span class="fu">basename</span> <span class="va">${_patches[0]})</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="fu">sed</span> -i <span class="st">&#39;1,12d&#39;</span> <span class="st">&quot;</span><span class="va">$srcdir</span><span class="st">/</span><span class="va">$(</span><span class="fu">basename</span> <span class="va">${_patches[2]})</span><span class="st">&quot;</span></a></code></pre></div>
<p>Fourth, and finally, inside of the <code>prepare()</code> function, I looped over each patch and applied them in the same way as I did in step 2 above:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">for</span> <span class="fu">patch</span> in <span class="st">&quot;</span><span class="va">${_patches[@]}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;Applying patch </span><span class="va">$(</span><span class="fu">basename</span> <span class="va">$patch)</span><span class="st">...&quot;</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="fu">patch</span> -Np1 -i <span class="st">&quot;</span><span class="va">$srcdir</span><span class="st">/</span><span class="va">$(</span><span class="fu">basename</span> <span class="va">$patch)</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="kw">done</span></a></code></pre></div>
<p>See <a href="https://wiki.archlinux.org/index.php/Patching_in_ABS">Patching in ABS</a> for further details.</p>
<h2 id="putting-it-all-together">Putting it all together</h2>
<p>That’s basically it. Now just run <code>makepkg -si</code> and make sure everything applies and installs correctly. Once it does, you should also run <code>namcap</code> on <code>PKGBUILD</code> and on the resulting <code>*.pkg.tar.xz</code> file to make sure there’s nothing wrong. In my case, <code>namcap</code> told me that the package didn’t actually depend on <code>libxext</code> or <code>xorg-fonts-misc</code>, even though the official PKGBUILD included those in the <code>depends</code> array, so I just removed them.</p>
<p>Before concluding, I want to mention two bonus tips.</p>
<p><strong>Tip #1</strong>: To avoid <code>config.h</code> from being overwritten by some future <code>asp export</code> (supposedly, this can’t happen, but just to be safe), and to keep my config located among all my other configuration files, I moved <code>config.h</code> into <code>~/.config/st</code> and then created a symlink to it from inside the build directory:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1">$ <span class="fu">mkdir</span> -p ~/.config/st</a>
<a class="sourceLine" id="cb7-2" title="2">$ <span class="fu">mv</span> ~/builds/st/config.h ~/.config/st</a>
<a class="sourceLine" id="cb7-3" title="3">$ <span class="fu">ln</span> -s ~/.config/st/config.h ~/builds/st</a></code></pre></div>
<p>The directory <code>~/.config/st</code> is not actually recognized by st in any way, but <code>~/.config</code> is where most other apps put their configuration files, so it makes things tidier, especially since I version-control most things inside <code>~/.config</code> with git.</p>
<p><strong>Tip #2</strong>: What if you want to modify the patches themselves, i.e. patch a patch (apart from removing the error-prone lines mentioned above)? In my case, I wanted to modify the copyurl patch. By default, this patch patches <code>st.c</code> so that it allows you to copy any URL starting with <code>http://</code> or <code>https://</code>, but I wanted to also be able to copy anything starting with <code>ftp://</code>, <code>mailto:</code>, or simply <code>www.</code>. So, here’s what I did.</p>
<p>First, I edited <code>st.c</code> by hand (<em>after</em> the copyurl patch had applied to it) in the way that I wanted, then manually reinstalled st to make sure it worked as expected. It did. I could’ve stopped here, but this isn’t really the elegant way to do things.</p>
<p>Next, I created a directory <code>~/builds/st/mypatches</code>, and within that, two subdirectories, <code>a</code> and <code>b</code>. Inside <code>a</code>, I placed the post-copyurl-patched <code>st.c</code> file, and inside <code>b</code>, I placed my revised post-copyurl-patched <code>st.c</code> file, and then ran…</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="fu">diff</span> -u a/st.c b/st.c <span class="op">&gt;</span> ../st-copyurl-bb.diff</a></code></pre></div>
<p>…to create a patch <code>st-copyurl-bb.diff</code> in the base package directory (alongside the other three patches).</p>
<p>Then I added this patch to the end of the <code>_patches</code> array, updated the hashes with <code>updpkgsums</code>, and re-ran <code>makepkg -si</code>, and everything worked out great.</p>
<p>So far, I’m extremely happy with st. It’s especially great to have a full range of colors in vim with minimal hassle, by adding these lines to my <code>vimrc</code>:</p>
<pre class="vim"><code>set termguicolors &quot; Enable true color support.
let &amp;t_8f = &quot;\&lt;Esc&gt;[38;2;%lu;%lu;%lum&quot;
let &amp;t_8b = &quot;\&lt;Esc&gt;[48;2;%lu;%lu;%lum&quot;</code></pre>]]></summary>
</entry>
<entry>
    <title>Ben Carson, "any", and context</title>
    <link href="https://brianbuccola.com//./ben-carson-any-and-context/" />
    <id>https://brianbuccola.com//./ben-carson-any-and-context/</id>
    <published>2017-01-15T00:00:00Z</published>
    <updated>2017-01-15T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>Dr. Ben Carson recently said:</p>
<blockquote>
<p>It will not be my intention to do anything to benefit ANY American.</p>
</blockquote>
<p>This is kind of a weird thing to say for someone who wants to run the U.S. Department of Housing and Urban Development, isn’t it?</p>
<p>More context (especially starting at 1:26):</p>
<iframe src="https://www.facebook.com/plugins/video.php?href=https%3A%2F%2Fwww.facebook.com%2Fsenatorelizabethwarren%2Fvideos%2Fvb.131559043673264%2F709256119236884%2F%3Ftype%3D3&amp;show_text=0&amp;width=560" width="560" height="315" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allowFullScreen="true">
</iframe>
<p>(<a href="https://www.facebook.com/senatorelizabethwarren/videos/vb.131559043673264/709256119236884/?type=2&amp;theater">source</a>)</p>
<blockquote>
<p><strong>Warren:</strong> Among the billions of dollars that you will be responsible for handing out in grants and loans, can you just assure us that not one dollar will go to benefit either the President-elect or his family?</p>
<p><strong>Carson:</strong> “It will not be my intention to do anything to benefit ANY American. It’s for ALL Americans, everything that we do.”</p>
</blockquote>
<p>Oh, I see now!</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode default"><code class="sourceCode default"><a class="sourceLine" id="cb1-1" title="1">not [[an American]_x [it will be my intention [something_y [I do y to benefit x]]]]</a></code></pre></div>
<p>Shout out to Andreas Haida for discussing this LF with me.</p>]]></summary>
</entry>
<entry>
    <title>Not paying a surcharge vs. getting a discount</title>
    <link href="https://brianbuccola.com//./surcharge-vs-discount/" />
    <id>https://brianbuccola.com//./surcharge-vs-discount/</id>
    <published>2017-01-10T00:00:00Z</published>
    <updated>2017-01-10T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>Semantics in the news (very broadly speaking): Not paying a surcharge vs. getting a discount — is there a difference? <a href="https://fivethirtyeight.com/features/in-todays-supreme-court-case-freedom-of-speech-meets-your-wallet/">In today’s Supreme Court case, freedom of speech meets your wallet</a>:</p>
<blockquote>
<p>“You can imagine that a rational person would look at a cash discount, understand that it’s functionally the same as a credit card surcharge, and make his decision accordingly,” said Todd Rogers, a professor of public policy at Harvard. “But the cool and important contribution that behavioral science can make here is to highlight how people behave in reality, which is not in this so-called rational way.” The word “surcharge,” he said, prompts consumers to think about the price differential in a way that “discount” does not — which, in turn, has an effect on their willingness to use cash.</p>
</blockquote>]]></summary>
</entry>
<entry>
    <title>The Yale Record does not endorse Hillary Clinton</title>
    <link href="https://brianbuccola.com//./the-yale-record-does-not-endorse-hillary-clinton/" />
    <id>https://brianbuccola.com//./the-yale-record-does-not-endorse-hillary-clinton/</id>
    <published>2016-10-27T00:00:00Z</published>
    <updated>2016-10-27T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>This is just a bookmark to remind myself to use <a href="http://yalerecord.org/2016/10/26/the-yale-record-does-not-endorse-hillary-clinton/">this wonderful little article by The Yale Record</a> next time I teach pragmatics.</p>
<p>Here is the full text:</p>
<blockquote>
<p>In its 144-year history, The Yale Record has never endorsed a Democratic candidate for president. In fact, we have never endorsed any candidate for president. This is, in part, due to our strong commitment to being a tax-exempt 501(c)3 organization, which mandates that we are “absolutely prohibited from directly or indirectly participating in, or intervening in, any political campaign on behalf of (or in opposition to) any candidate for elective public office.”</p>
<p>This year’s presidential election is highly unusual, but ultimately no different: The Yale Record believes both candidates to be equally unendorsable, due to our faithful compliance with the tax code.</p>
<p>In particular, we do not endorse Hillary Clinton’s exemplary leadership during her 30 years in the public eye. We do not support her impressive commitment to serving and improving this country—a commitment to which she has dedicated her entire professional career. Because of unambiguous tax law, we do not encourage you to support the most qualified presidential candidate in modern American history, nor do we encourage all citizens to shatter the glass ceiling once and for all by electing Secretary Clinton on November 8.</p>
<p>The Yale Record has no opinion whatsoever on Dr. Jill Stein.</p>
<p>—The Editorial Board of The Yale Record</p>
</blockquote>]]></summary>
</entry>
<entry>
    <title>Use Biblatex/Biber to create a new subdatabase based on an auxiliary file</title>
    <link href="https://brianbuccola.com//./use-biblatex-biber-to-create-a-new-subdatabase-based-on-an-auxiliary-file/" />
    <id>https://brianbuccola.com//./use-biblatex-biber-to-create-a-new-subdatabase-based-on-an-auxiliary-file/</id>
    <published>2016-10-05T00:00:00Z</published>
    <updated>2016-10-05T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p><em>(NB: I discovered this feature of Biblatex/Biber by searching for a way to replicate <a href="https://help.jabref.org/en/NewBasedOnAux">the very same feature in JabRef</a>, which I no longer use.)</em></p>
<p>Sorry for the title gore. Here is what I mean. Suppose you’re writing a paper called <code>paper.tex</code> that uses a BibTeX database (bib file) called <code>master.bib</code> containing all of your references. Normally, of course, <code>paper.tex</code> doesn’t cite every single entry in <code>master.bib</code>, but only a subset of them. Suppose now that your paper has been accepted in some journal, and you need to submit your bib file to the typesetters. Obviously, you don’t really want to submit your entire <code>master.bib</code>, but you also don’t want to manually extract the subset of entries actually cited in your paper. Well, it turns out you don’t have to: you can automatically create a new bib file containing exactly that subset by using <code>biber</code> (the backend processor to <a href="http://biblatex-biber.sourceforge.net/">Biblatex</a>). Here’s how. (NB: In <code>paper.tex</code>, you have to use the <code>biblatex</code> package with <code>biber</code> as the backend processor. This won’t work with regular <code>bibtex</code>.)</p>
<p><strong>Step 1.</strong> Run <code>pdflatex paper.tex</code>, which will generate the auxiliary file <code>paper.bcf</code>.</p>
<p><strong>Step 2.</strong> Run <code>biber --output-format=bibtex paper.bcf</code>.</p>
<p>(You can leave off the <code>.tex</code> and <code>.bcf</code> extension in both commands.)</p>
<p>This will generate a file <code>paper_biber.bib</code> containing all entries in <code>master.bib</code> that are cited in <code>paper.tex</code>. At this point in our made-up scenario, you would probably rename <code>paper_biber.bib</code> to something like <code>refs.bib</code>, change the <code>\addbibresource</code> line in <code>paper.tex</code> to use <code>refs.bib</code>, recompile everything to make sure it all works, and finally submit <code>paper.tex</code> and <code>refs.bib</code> to the journal.</p>
<p>One quick follow-up note. By default, <code>biber</code> will put entry names like <code>@article</code> and entry fields like <code>author</code> in all caps:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bibtex"><code class="sourceCode bibtex"><a class="sourceLine" id="cb1-1" title="1"><span class="va">@ARTICLE</span>{<span class="ot">smith2016</span>,</a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">AUTHOR</span> = {Mary Smith},</a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="dt">...</span></a>
<a class="sourceLine" id="cb1-4" title="4">}</a></code></pre></div>
<p>I personally like having everything in all lower case, because I don’t like my bib entries to yell at me (of course, as far as <code>biber</code> is concerned, it doesn’t actually matter: it’s all cosmetics). You can tell <code>biber</code> what to do by using the <code>--output_fieldcase</code> flag. The possible options are <code>upper</code> (default), <code>lower</code> (my preference), or <code>title</code> (e.g. <code>InProceedings</code>).</p>
<p>There are a bunch of other output options, too. For example, you can specify the output filename (e.g. <code>--output-file=refs.bib</code>), whether to align entry fields in neat columns (<code>--output-align</code>), how many spaces to indent entry fields (e.g. <code>--output-indent=4</code>), and so on. See <code>biber --help</code>, in particular everything starting with <code>--output-*</code>. Here’s an example command.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">$ <span class="ex">biber</span> --output-format=bibtex --output_fieldcase=lower --output-file=refs.bib paper.bcf</a></code></pre></div>]]></summary>
</entry>
<entry>
    <title>Line breaks in mutt and vim</title>
    <link href="https://brianbuccola.com//./line-breaks-in-mutt-and-vim/" />
    <id>https://brianbuccola.com//./line-breaks-in-mutt-and-vim/</id>
    <published>2016-07-07T00:00:00Z</published>
    <updated>2016-07-07T00:00:00Z</updated>
    <summary type="html"><![CDATA[<h2 id="the-problem">The problem</h2>
<p>I’ve been using <a href="http://www.mutt.org/">mutt</a> as my primary email client, and <a href="http://www.vim.org/">vim</a> as my text editor for composing emails, for literally <em>years</em>, and I only just recently discovered that my email text comes out very funny looking on the recipient’s end when they view the email on a small screen, like a smartphone screen.</p>
<p>By “funny looking”, what I mean is this. When I compose email text in vim, I hard-break lines at 80 characters, because imho it’s much easier to read 12 lines of 80 characters each than, say, 6 lines of 160 characters each. However (and this should’ve been painfully obvious to me long ago), if someone is viewing such text on a screen that can display fewer than 80 characters per line, then the screen wraps (soft-breaks) the line <em>before</em> the 80th character, while the email text itself <em>still</em> hard-breaks at the 80th character, so that you end up with (what looks like) <em>two</em> line breaks. In other words, you get the following, where “X” marks the spot where the smartphone display wraps the line, and “Y” marks where the email text hard-breaks the line (e.g. the 80th character):</p>
<pre><code>text text text text text text text text text text text text X
text text Y
text text text text text text text text text text text text X
text text Y
text text text text text text text text text text text text X
text text Y
text text text text text text text text text text text text X
text text Y</code></pre>
<p>which obviously looks much uglier than</p>
<pre><code>text text text text text text text text text text text text text text Y
text text text text text text text text text text text text text text Y
text text text text text text text text text text text text text text Y
text text text text text text text text text text text text text text Y</code></pre>
<p>A similar issue arises with quoted text in a reply email (which I also noticed long ago, but never really bothered to try and fix): quoted text is typically preceded by a “&gt;”, but doing that can cause an unwanted line break, so that you end up with the following, where “X” marks the new line break that occurs at, say, the 80th character, and “Y” marks the old line break that had occurred at the 80th character before “&gt;” was added:</p>
<pre><code>&gt; text text text text text text text text text text text text X
text text Y
&gt; text text text text text text text text text text text text X
text text Y
&gt; text text text text text text text text text text text text X
text text Y
&gt; text text text text text text text text text text text text X
text text Y</code></pre>
<p>Again, this is much worse than</p>
<pre><code>&gt; text text text text text text text text text text text text text text Y
&gt; text text text text text text text text text text text text text text Y
&gt; text text text text text text text text text text text text text text Y
&gt; text text text text text text text text text text text text text text Y</code></pre>
<h2 id="the-solution">The solution</h2>
<h3 id="flowed-text-in-mutt">Flowed text in mutt</h3>
<p>The solution to both problems is to use an email option called <em>flowed text</em>, or <em>flowed format</em>. In mutt, you just add the line</p>
<pre><code>set text_flowed</code></pre>
<p>to your <code>muttrc</code>. (Apparently all (or most) email clients support/respect this feature.)</p>
<p>Flowed text essentially means this: a hard line break in the email text will <em>not</em> be interpreted and rendered (by the email client) as an actual line break <em>if</em> the line ends in white space; a hard line break <em>will</em> be interpreted and rendered as an actual line break <em>if</em> the line ends in a non-white-space character. (You can read more about flowed text <a href="http://joeclark.org/ffaq.html">here</a>.)</p>
<p>For example, the following text, where <code>-</code> stands for a single white space character (not a hyphen)</p>
<pre><code>text text text text-
text text-
text text text text text text text-</code></pre>
<p>will pretty much be treated as if it had been written all on a single line: the email client will simply wrap the line wherever it sees fit (or maybe not at all, if it fits all on the screen), but not elsewhere. By contrast,</p>
<pre><code>text text text text
text text
text text text text text text text</code></pre>
<p>will be treated as three distinct lines (useful for haikus, maybe, or lists).</p>
<p>So basically, you can write your email text, breaking at 80 characters just like before, <em>as long as</em> each line ends in a space. (And if you actually want a real line break, as in a haiku or list, just don’t add the trailing space.)</p>
<h3 id="flowed-text-in-vim">Flowed text in vim</h3>
<p>Now, you might be thinking, <em>That’s annoying. I don’t want to manually add a space after every line break</em>. Thankfully, vim makes this extremely easy. Just add the <code>w</code> option to your <code>formatoptions</code>:</p>
<pre class="vim"><code>set formatoptions+=w</code></pre>
<p>Now, as you’re typing, when you hit 80 characters (or whatever your <code>textwidth</code> is set to), vim will hard-break the line <em>and</em> add the trailing white space for you. Easy.</p>
<p>You probably only want this to happen when you write emails. To ensure this, you can set the <code>w</code> option only for files with the <code>mail</code> filetype, using an <code>autocmd</code>:</p>
<pre class="vim"><code>&quot; Add format option &#39;w&#39; to add trailing white space, indicating that paragraph
&quot; continues on next line. This is to be used with mutt&#39;s &#39;text_flowed&#39; option.
augroup mail_trailing_whitespace &quot; {
    autocmd!
    autocmd FileType mail setlocal formatoptions+=w
augroup END &quot; }</code></pre>
<p>See <code>:help fo-table</code> for more info.</p>]]></summary>
</entry>

</feed>
