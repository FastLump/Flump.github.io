<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>

  <title>Brian Buccola &middot; Leaving vim-latex for rubber and ultisnips</title>
  <meta name="description" content="Update: I actually use latexmk now instead of rubber, since it alreadyships with texlive and has all the features of rubber (and then some). Thelatexmk comma...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://brianbuccola.com/leaving-vim-latex-for-rubber-and-ultisnips">
  <link rel="alternate" type="application/rss+xml" title="Brian Buccola" href="http://brianbuccola.com/feed.xml">

  <!-- mathjax config similar to math.stackexchange -->
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <!-- <a class="site-title" href="/">Brian Buccola</a> -->

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/">Home</a>
        <a class="page-link" href="/about">About</a>
        <a class="page-link" href="/news">News</a>
        <a class="page-link" href="/work">Work</a>
        <a class="page-link" href="/files/buccola-cv.pdf">CV</a>
        <a class="page-link" href="/contact">Contact</a>
        <a class="page-link" href="/blog">Blog</a>
        <a class="page-link" href="/feed.xml"><span class="icon icon--feed"><?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> 
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px" id="RSSicon" viewBox="0 0 256 256">
<defs>
<linearGradient x1="0.085" y1="0.085" x2="0.915" y2="0.915" id="RSSg">
<stop  offset="0.0" stop-color="#E3702D"/><stop  offset="0.1071" stop-color="#EA7D31"/>
<stop  offset="0.3503" stop-color="#F69537"/><stop  offset="0.5" stop-color="#FB9E3A"/>
<stop  offset="0.7016" stop-color="#EA7C31"/><stop  offset="0.8866" stop-color="#DE642B"/>
<stop  offset="1.0" stop-color="#D95B29"/>
</linearGradient>
</defs>
<rect width="256" height="256" rx="55" ry="55" x="0"  y="0"  fill="#CC5D15"/>
<rect width="246" height="246" rx="50" ry="50" x="5"  y="5"  fill="#F49C52"/>
<rect width="236" height="236" rx="47" ry="47" x="10" y="10" fill="url(#RSSg)"/>
<circle cx="68" cy="189" r="24" fill="#FFF"/>
<path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="#FFF"/>
<path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="#FFF"/>
</svg>
</span></a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Leaving vim-latex for rubber and ultisnips</h1>
    <p class="post-meta"><time datetime="2013-02-09T21:08:00+02:00" itemprop="datePublished">Feb 9, 2013</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><strong><em>Update:</em></strong> <em>I actually use <code class="highlighter-rouge">latexmk</code> now instead of rubber, since it already
ships with texlive and has all the features of rubber (and then some). The
<code class="highlighter-rouge">latexmk</code> command (analogous to the rubber command below) is <code class="highlighter-rouge">latexmk -pdf
file.tex</code>, or in vim, <code class="highlighter-rouge">:w&lt;CR&gt;:!latexmk -pdf %&lt;CR&gt;</code>.</em></p>

<p>Several years ago when I started using <a href="http://www.vim.org/">vim</a>, I needed a way to integrate
<script type="math/tex">\LaTeX{}</script> and stumbled on the hugely popular <a href="http://vim-latex.sourceforge.net/">vim-latex</a> plugin.  It
comes with a ton of bells and whistles, like automatic text replacement,
shortcuts for inserting environments, and macros for compiling <code class="highlighter-rouge">tex</code> code and
for opening the resulting <code class="highlighter-rouge">pdf</code> in your favorite viewer. Also, for users of
graphical vim, vim-latex adds a ton of new menus that list various
environments, commands, packages and their options, etc.</p>

<p>Over the years, however, I’ve realized that I don’t actually use any of the
features other than the two macros above, plus a few basic text replacements
and environment shortcuts. In fact, some of the features can be quite annoying
and (as far as I’ve been able to learn) are not easily disabled.  For example,
if I want to write an expression in single quotes that starts with ‘a’, such as
‘arm’, the moment I type <code class="highlighter-rouge">`a</code>, the replacement mechanim kicks in and
replaces it with <code class="highlighter-rouge">\alpha</code>. And similar for a bunch of other character
combinations.</p>

<p>So the other day, I finally decided to get rid of vim-latex all together and
write my own macros for compiling and viewing. Initially, I was just going to
use <code class="highlighter-rouge">pdflatex</code>, but then I remembered about the awesome <a href="https://launchpad.net/rubber/">rubber</a>, a program
for handling “all tasks related to the compilation of LaTeX documents”. That
especially means compiling multiple times to fix labels as well as doing the
whole</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pdflatex
<span class="gp">$ </span>bibtex
<span class="gp">$ </span>pdflatex
<span class="gp">$ </span>pdflatex
</code></pre>
</div>

<p>runaround. As expected, <code class="highlighter-rouge">rubber</code> also comes with a slew of options and can
compile to any of the usual formats.</p>

<p>Here are the two macros I wrote:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">" LaTeX (rubber) macro</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">c</span> <span class="p">:</span><span class="k">w</span><span class="p">&lt;</span>CR<span class="p">&gt;:!</span>rubber <span class="p">--</span>pdf <span class="p">--</span>warn <span class="k">all</span> %<span class="p">&lt;</span>CR<span class="p">&gt;</span>

<span class="c">" View PDF macro; '%:r' is current file's root (base) name.</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">v</span> <span class="p">:!</span>mupdf %<span class="p">:</span><span class="k">r</span><span class="p">.</span>pdf &amp;<span class="p">&lt;</span>CR<span class="p">&gt;&lt;</span>CR<span class="p">&gt;</span>
</code></pre>
</div>

<p>The first macro (mnemonic: <strong>c</strong>ompile) saves the current file and then runs
<code class="highlighter-rouge">rubber --pdf --warn all</code> on it, which compiles to <code class="highlighter-rouge">pdf</code> using <code class="highlighter-rouge">pdflatex</code> and
shows all warnings and errors.</p>

<p>The second macro (mnemonic: <strong>v</strong>iew) opens the current <code class="highlighter-rouge">tex</code> file’s <code class="highlighter-rouge">pdf</code> file
in mupdf. The sequence <code class="highlighter-rouge">%:r</code> returns the root of the current filename, i.e.,
with the last extension removed (same as GNU/Linux <code class="highlighter-rouge">basename</code>).</p>

<p>If you only want these macros to be available when editing a tex file, then
group them into an <code class="highlighter-rouge">augroup</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">" LaTeX macros for compiling and viewing</span>
augroup latex_macros " <span class="p">{</span>
    autocmd<span class="p">!</span>
    autocmd <span class="nb">FileType</span> tex <span class="p">:</span>nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">c</span> <span class="p">:</span><span class="k">w</span><span class="p">&lt;</span>CR<span class="p">&gt;:!</span>rubber <span class="p">--</span>pdf <span class="p">--</span>warn <span class="k">all</span> %<span class="p">&lt;</span>CR<span class="p">&gt;</span>
    autocmd <span class="nb">FileType</span> tex <span class="p">:</span>nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">v</span> <span class="p">:!</span>mupdf %<span class="p">:</span><span class="k">r</span><span class="p">.</span>pdf &amp;<span class="p">&lt;</span>CR<span class="p">&gt;&lt;</span>CR<span class="p">&gt;</span>
augroup END " <span class="p">}</span>
</code></pre>
</div>

<p>I like this method because I have other compiling and viewing macros for other
filetypes, such as a macro that converts markdown to html with <a href="http://johnmacfarlane.net/pandoc/">pandoc</a>. I
can use the same <code class="highlighter-rouge">&lt;leader&gt;c</code> binding, and vim knows which macro to run based on
the filetype of the document I’m writing.</p>

<p>And there are other ways of creating sweet vim/latex harmony without vim-latex.
For example, for text replacement, I’ve started experimenting with
<a href="https://github.com/SirVer/ultisnips">ultisnips</a> (influenced by, but by now better than, <a href="https://github.com/msanders/snipmate.vim">snipmate</a>). It
ships with a few handy LaTeX snippets, and it’s super easy to write new ones
(or snippets for any filetype).</p>

<p>I’ve also started using <a href="https://github.com/tpope/vim-surround">surround</a>, which vastly simplifies the inserting,
changing, and deleting of “surroundings”, e.g., <code class="highlighter-rouge">)</code>, <code class="highlighter-rouge">}</code>, <code class="highlighter-rouge">"</code>, etc.</p>

<p>Hopefully in the near future I’ll write up a more detailed post about my new
vim + latex (sans vim-latex) workflow.</p>


  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="footer-wrapper">
      &copy; Brian Buccola. Powered by <a
         href="https://jekyllrb.com/">Jekyll</a> and <a
         href="https://github.com/">GitHub</a>.
    </div>
  </div>
</footer>


  </body>

</html>
