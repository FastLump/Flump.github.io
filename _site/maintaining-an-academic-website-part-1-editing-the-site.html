<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>

  <title>Brian Buccola &middot; Maintaining an academic website, part 1: editing the site</title>
  <meta name="description" content="This is the first in a series of posts in which I’ll explain how I currentlymaintain my academic website (here). By “maintain”, I meaneverything from editing...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://brianbuccola.com/maintaining-an-academic-website-part-1-editing-the-site">
  <link rel="alternate" type="application/rss+xml" title="Brian Buccola" href="http://brianbuccola.com/feed.xml">

  <!-- mathjax config similar to math.stackexchange -->
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <!-- <a class="site-title" href="/">Brian Buccola</a> -->

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/">Home</a>
        <a class="page-link" href="/about">About</a>
        <a class="page-link" href="/news">News</a>
        <a class="page-link" href="/work">Work</a>
        <a class="page-link" href="/files/buccola-cv.pdf">CV</a>
        <a class="page-link" href="/contact">Contact</a>
        <a class="page-link" href="/blog">Blog</a>
        <a class="page-link" href="/feed.xml"><span class="icon icon--feed"><?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> 
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px" id="RSSicon" viewBox="0 0 256 256">
<defs>
<linearGradient x1="0.085" y1="0.085" x2="0.915" y2="0.915" id="RSSg">
<stop  offset="0.0" stop-color="#E3702D"/><stop  offset="0.1071" stop-color="#EA7D31"/>
<stop  offset="0.3503" stop-color="#F69537"/><stop  offset="0.5" stop-color="#FB9E3A"/>
<stop  offset="0.7016" stop-color="#EA7C31"/><stop  offset="0.8866" stop-color="#DE642B"/>
<stop  offset="1.0" stop-color="#D95B29"/>
</linearGradient>
</defs>
<rect width="256" height="256" rx="55" ry="55" x="0"  y="0"  fill="#CC5D15"/>
<rect width="246" height="246" rx="50" ry="50" x="5"  y="5"  fill="#F49C52"/>
<rect width="236" height="236" rx="47" ry="47" x="10" y="10" fill="url(#RSSg)"/>
<circle cx="68" cy="189" r="24" fill="#FFF"/>
<path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="#FFF"/>
<path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="#FFF"/>
</svg>
</span></a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Maintaining an academic website, part 1: editing the site</h1>
    <p class="post-meta"><time datetime="2013-02-23T15:19:00+02:00" itemprop="datePublished">Feb 23, 2013</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>This is the first in a series of posts in which I’ll explain how I currently
maintain my academic website (<a href="http://people.linguistics.mcgill.ca/~brian.buccola/">here</a>). By “maintain”, I mean
everything from editing the site locally on my PC, to pushing the changes to
the remote McGill server that hosts the site, to version–controlling it all
with git. The best thing about it: no browser (or any GUI at all) is
required—everything happens in the terminal—<em>and</em> I still don’t have to
deal with HTML. The method should work for any simple website with static
content.</p>

<p>Also, I realize that my site is currently pretty small, and there’s not much to
update very often, so my method may seem overly complex, but (i) it was a fun
learning experience setting it all up, and (ii) as my site grows, I think my
method will make site maintenance way easier than it otherwise would be, while
also keeping the actual site simple (see next).</p>

<p><strong>KISS disclaimer.</strong> Before I begin, I should mention that when it comes to
professional websites, I believe that the <a href="http://en.wikipedia.org/wiki/KISS_principle">KISS</a> principle should be
followed: <strong>K</strong>eep <strong>i</strong>t <strong>s</strong>imple, <strong>s</strong>tupid! For me, that means no flashy
banners or animations, no crazy amount of fonts or colors, etc. For this post,
I’ll assume we’re dealing with a website with a single page called <code class="highlighter-rouge">index.html</code>
(but extending the method to multiple pages should be trivial) consisting of
little more than basic text (headers, links, lists) and basic formatting (bold,
italics) and maybe an image or two. Of course, feel free to go crazy in your
CSS stylesheet… but please, no neon.</p>

<p>Here is my general workflow for site maintenance.</p>

<ol>
  <li>Edit the site locally on my PC, using <a href="http://daringfireball.net/projects/markdown/">markdown</a> and <a href="http://johnmacfarlane.net/pandoc/">pandoc</a>.</li>
  <li>Push changes to the remote server hosting the site, using <code class="highlighter-rouge">ssh</code> and
 <a href="http://rsync.samba.org/">rsync</a>.</li>
  <li>Track changes using <a href="http://git-scm.com/">git</a>, and push changes to <a href="https://github.com/">GitHub</a> (or similar) for
 version control.</li>
</ol>

<p>Each post in this series will cover one step in detail, including the various
scripts I’ve hacked together to automate it all.</p>

<!-- more -->

<h2 id="editing-the-site">Editing the site</h2>

<p>Editing your webpage could be as simple as opening <code class="highlighter-rouge">index.html</code> in your
favorite text editor and hammering away, and in fact, that’s what I used to do.
But I really hate editing HTML. To me, the tags make everything ugly and
unreadable, and since I’m no web developer, I never know the proper way to do
things anyway. Is it <code class="highlighter-rouge">&lt;br&gt;</code> or <code class="highlighter-rouge">&lt;br /&gt;</code>? Do I close with <code class="highlighter-rouge">&lt;/p&gt;</code>, or is that
unnecessary? I dunno!</p>

<p>That’s why now I write exclusively in <a href="http://daringfireball.net/projects/markdown/">markdown</a>. In fact, I write this blog
in markdown, I write my notes in markdown, I write emails (mostly) in markdown.
When I want HTML, I just use <a href="http://johnmacfarlane.net/pandoc/">pandoc</a> to automagically convert the markdown
to HTML and add the necessary HTML header stuff.</p>

<p>The rest of this post will explain the merits of markdown and pandoc and how I
use them together to write my webpage. Here’s the breakdown:</p>

<ul>
  <li><a href="#markdown">Markdown</a></li>
  <li><a href="#pandoc">Pandoc</a></li>
  <li><a href="#metadata">Metadata</a></li>
  <li><a href="#putting-it-all-together">Putting it all together</a></li>
</ul>

<h3 id="markdown">Markdown</h3>

<p>Markdown was designed as a way to write highly readable plain text that can be
converted into HTML while also faithfully reproducing lists, textual emphasis,
links, etc. Take, for example, the following simple HTML code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>My supercool site<span class="nt">&lt;/h1&gt;</span>

Welcome to the <span class="nt">&lt;em&gt;</span>best<span class="nt">&lt;/em&gt;</span> academic site in the world! Here are my research
interests:

<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span>Stuff<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>Junk<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>More stuff<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

You can download my CV <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"cv.pdf"</span><span class="nt">&gt;</span>here<span class="nt">&lt;/a&gt;</span>!
</code></pre>
</div>

<p>Okay, okay, it’s not as ugly and illegible as I made it out to be (that is, as
long you don’t start adding javascript and <code class="highlighter-rouge">div</code> and <code class="highlighter-rouge">span</code> tags everywhere),
but compare it with the totally equivalent markdown version:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gu">My supercool site
=================
</span>
Welcome to the <span class="ge">*best*</span> site in the world! Here are my research interests:
<span class="p">
-</span> Stuff
<span class="p">-</span> Junk
<span class="p">-</span> More stuff

You can download my CV <span class="p">[</span><span class="nv">here</span><span class="p">](</span><span class="sx">cv.pdf</span><span class="p">)</span>.
</code></pre>
</div>

<p>If you’ve never seen markdown before, you might not even realize that there’s
anything “special” about the text above. By “special”, I mean syntactically:
the fact that <code class="highlighter-rouge">=</code>, <code class="highlighter-rouge">*</code>, <code class="highlighter-rouge">-</code>, and <code class="highlighter-rouge">[..](..)</code> have special meanings when they
occur in markdown. The text reads very naturally, as if it were written just to
look good but without any well–defined syntactic meaning. But it’s much more
than just good–looking text.</p>

<p>In markdown, underlining text with <code class="highlighter-rouge">=</code> makes it a main header, surrounding text
with <code class="highlighter-rouge">*</code> makes it emphatic (usually rendered as italics), listing things with
<code class="highlighter-rouge">-</code> (or <code class="highlighter-rouge">*</code>) turns them into, well, lists, and so forth. Only the link syntax
is slightly unintuitive (maybe), but it’s easy to learn, and if you use
<a href="http://www.reddit.com/">reddit</a> or <a href="http://stackoverflow.com/">stackoverflow</a>, you probably already know it.</p>

<p>The basic markdown syntax is pretty simple, and yet also quite comprehensive.
As long as you’re maintaining a simple, KISS–type website, markdown should
serve you well. That’s all I’ll say about markdown syntax; for more info, head
to the markdown website, and definitely read the entire
<a href="http://daringfireball.net/projects/markdown/syntax">syntax</a> page. (It’s not
long, which is a testament to markdown’s simplicity.)</p>

<h3 id="pandoc">Pandoc</h3>

<p>OK, so you’ve got a markdown file, like <code class="highlighter-rouge">index.markdown</code>, with some headers,
paragraphs, lists, links. Now what? Enter pandoc, the Swiss army knife of
document conversion tools. You can convert your file to HTML5, <script type="math/tex">\LaTeX</script>, and
plenty other formats, but we’ll stick with HTML5.</p>

<p>Moreover, pandoc understands a <em>superset</em> of markdown, i.e., a sort of extended
markdown. For example, you can add metadata to the top of your markdown file
that pandoc can use when creating HTML header info (see below), and you can do
other cool things like add footnotes. Following the KISS principle, though,
we’ll stick with normal, non–extended markdown.</p>

<p>(Note that pandoc is not the only conversion tool you can use. Markdown comes
with its own perl script, <code class="highlighter-rouge">Markdown.pl</code>, and there’s also <a href="http://kramdown.rubyforge.org/">kramdown</a>,
<a href="http://maruku.rubyforge.org/">maruku</a>, etc., written in Ruby. But pandoc has some really useful options
that’ll make life easier, as we’ll see below. If you prefer Ruby over Haskell,
try one of the above.)</p>

<p>The basic command is:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pandoc -f markdown -t html5 -o index.html index.markdown
</code></pre>
</div>

<p>Legend:</p>

<ul>
  <li><code class="highlighter-rouge">$</code> is the terminal prompt; don’t type this.</li>
  <li><code class="highlighter-rouge">-f markdown</code> means convert <strong>f</strong>rom markdown.</li>
  <li><code class="highlighter-rouge">-t html5</code> means convert <strong>t</strong>o HTML5.</li>
  <li><code class="highlighter-rouge">-o index.html</code> means make <code class="highlighter-rouge">index.html</code> the <strong>o</strong>utput filename.</li>
  <li><code class="highlighter-rouge">index.markdown</code> is the main argument of <code class="highlighter-rouge">pandoc</code>; it’s the file we’re
converting.</li>
</ul>

<h3 id="metadata">Metadata</h3>

<p>Assuming you have a basic <code class="highlighter-rouge">index.markdown</code> with no extra HTML in it (oh, I
forgot to mention that markdown can include arbitrary HTML, but remember,
KISS), then pandoc will produce an HTML file that has all the basic HTML tags
corresponding to your markdown syntax, but it’ll lack any metadata
(the stuff inside <code class="highlighter-rouge">&lt;head&gt;</code>) , like what the title of the website is—which is
very important, since, for example, that’s what people will see in Google
search results—and who the author is, also very important, if you want people
to find your site when they Google you.</p>

<p>Luckily, pandoc provides a commandline option for automatically generating
header info, the <code class="highlighter-rouge">DOCTYPE</code>, etc.: it’s <code class="highlighter-rouge">-s</code>, meaning <strong>s</strong>tandalone, as in the
output can stand on its own as an HTML file.</p>

<p>However, using <code class="highlighter-rouge">-s</code> still won’t add a title or an author. There are two ways to
do that. First, as mentioned above, you can add pandoc–specific metadata to
your markdown file, like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>% My title
% My name

<span class="gu">My supercool site
=================
</span>
...
</code></pre>
</div>

<p>When pandoc parses the file, it’ll see the top two lines starting with <code class="highlighter-rouge">%</code> and
from them generate title and author info for the header. However, I don’t like
this method because it dirties up the markdown file, in the sense that
<code class="highlighter-rouge">index.markdown</code> is now written in pandoc–specific, extended markdown. (If you
later decided to convert your file with, say, kramdown, or if you viewed it in
your browser on GitHub, then you’d see those two <code class="highlighter-rouge">%</code> lines in your HTML
output.) But if that doesn’t bother you, by all means use this method.</p>

<p>A second way to supply title and author info is by explicitly telling pandoc
what values to use for its internal author and title <strong>v</strong>ariables:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pandoc -V <span class="nv">pagetitle</span><span class="o">=</span><span class="s2">"My title"</span> -V author-meta<span class="o">=</span><span class="s2">"My name"</span> ...
</code></pre>
</div>

<p>Since I use a personalized script (see below) to run pandoc, I prefer this
method because I can keep this metainfo inside my script and not inside the
markdown file itself. Separation of main content and meta–content is
important!</p>

<p>Now what if you want to add more header info for which pandoc doesn’t have
internal variables or command–line options? That’s easy: create <code class="highlighter-rouge">header.html</code>
(or whatever you want to call it), throw in whatever HTML you want in your
header (except title and author), and run</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pandoc -H header.html ...
</code></pre>
</div>

<p>Your <code class="highlighter-rouge">header.html</code> is a great place to add optional stuff like <code class="highlighter-rouge">description</code>
and <code class="highlighter-rouge">keyword</code> metadata, the URL to your favicon (if you have one), and any
Google Analytics code.</p>

<p>You can also have a <code class="highlighter-rouge">before-body.html</code> file which, if <code class="highlighter-rouge">-B before-body.html</code> is
used, will be inserted as the very first thing after <code class="highlighter-rouge">&lt;body&gt;</code>. I use this to
hold the code that puts my picture in the top–right corner of my webpage. The
reason I do this is that markdown doesn’t deal with images very well, so I need
to use <code class="highlighter-rouge">div</code> and other ugly–looking HTML. Plus, I don’t feel that an image is
part of the main content anyway; if I wanted to give someone a text–only
version of my page, I’d like to be able to give them the markdown source, with
no image code.</p>

<p>Also, as you probably guessed, you can have an <code class="highlighter-rouge">after-body.html</code> file which, if
<code class="highlighter-rouge">-A after-body.html</code> is used, will be inserted as the last thing before
<code class="highlighter-rouge">&lt;/body&gt;</code>. This is useful if you want, say, a footer that’s not semantically
part of the main page, e.g., a “last updated: …” line.</p>

<p>(Note: the mnemonic is that <code class="highlighter-rouge">-B</code> specifies what goes <strong>b</strong>efore the body, and
<code class="highlighter-rouge">-A</code> what goes <strong>a</strong>fter, but keep in mind that both contents do ultimately end
up <em>inside</em> of <code class="highlighter-rouge">&lt;body&gt;&lt;/body&gt;</code>.)</p>

<h3 id="putting-it-all-together">Putting it all together</h3>

<p>All right, so you’ve got <code class="highlighter-rouge">index.markdown</code>, and maybe also <code class="highlighter-rouge">header.html</code>,
<code class="highlighter-rouge">before-body.html</code> and <code class="highlighter-rouge">after-body.html</code>. You probably also have a CSS
stylesheet like <code class="highlighter-rouge">mystyle.css</code>, which you can tell pandoc about with <code class="highlighter-rouge">-c
mystyle.css</code> (or you can refer to it yourself in <code class="highlighter-rouge">header.html</code>).</p>

<p>Here’s what your command will look like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>pandoc <span class="se">\</span>
    -c mystyle.css <span class="se">\</span>
    -H header.html -B before-body.html -A after-body.html <span class="se">\</span>
    -V <span class="nv">pagetitle</span><span class="o">=</span><span class="s2">"My title"</span> -V author-meta<span class="o">=</span><span class="s2">"My name"</span> <span class="se">\</span>
    -f markdown -t html5 -o index.html index.markdown
</code></pre>
</div>

<p>Wow, that’s a lot to type each time you want to convert a newly modified
markdown file into HTML. Better put that inside a script. Let’s also put each
of those things into a variable, so that we can easily modify the script
command by changing variables rather than the command itself.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nv">TITLE</span><span class="o">=</span><span class="s2">"My title"</span>
<span class="nv">AUTHOR</span><span class="o">=</span><span class="s2">"My name"</span>

<span class="nv">IN_FILE</span><span class="o">=</span><span class="s2">"./index.markdown"</span>
<span class="nv">OUT_FILE</span><span class="o">=</span><span class="s2">"./index.html"</span>

<span class="nv">CSS</span><span class="o">=</span><span class="s2">"./mystyle.css"</span>
<span class="nv">HEADER</span><span class="o">=</span><span class="s2">"./header.html"</span>
<span class="nv">BEFORE</span><span class="o">=</span><span class="s2">"./before-body.html"</span>
<span class="nv">AFTER</span><span class="o">=</span><span class="s2">"./after-body.html"</span>

<span class="c"># Convert markdown to html5.</span>
pandoc
    -c <span class="s2">"</span><span class="nv">$CSS</span><span class="s2">"</span> <span class="se">\</span>
    -H <span class="s2">"</span><span class="nv">$HEADER</span><span class="s2">"</span> -B <span class="s2">"</span><span class="nv">$BEFORE</span><span class="s2">"</span> -A <span class="s2">"</span><span class="nv">$AFTER</span><span class="s2">"</span> <span class="se">\</span>
    -V <span class="nv">pagetitle</span><span class="o">=</span><span class="s2">"</span><span class="nv">$TITLE</span><span class="s2">"</span> -V author-meta<span class="o">=</span><span class="s2">"</span><span class="nv">$AUTHOR</span><span class="s2">"</span> <span class="se">\</span>
    -f markdown -t html5 -o <span class="s2">"</span><span class="nv">$OUT_FILE</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$IN_FILE</span><span class="s2">"</span>
</code></pre>
</div>

<p>Save this as, say, <code class="highlighter-rouge">md2html.sh</code>, make it executable with <code class="highlighter-rouge">chmod +x md2html.sh</code>,
plop it inside the website directory containing <code class="highlighter-rouge">index.markdown</code>, and simply
run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./md2html.sh
</code></pre>
</div>

<p>You should now see <code class="highlighter-rouge">index.html</code> in the same directory, which you can open in
your browser to inspect and make sure it looks good.</p>

<p>And there you have it. Now, whenever you need to edit your webpage, you can
deal entirely with <code class="highlighter-rouge">index.markdown</code> using your favorite text editor, save the
changes, and run <code class="highlighter-rouge">md2html.sh</code> to (re–)generate <code class="highlighter-rouge">index.html</code>. Easy.</p>

<p>In the next post, I’ll explain how to push your website onto a remote server,
e.g., a university server, using ssh and rsync inside a script. The end result
is that, in the same way that <code class="highlighter-rouge">md2html.sh</code> does the whole conversion in one
fell swoop, so too will <code class="highlighter-rouge">push-website.sh</code> push your site in one fell swoop: no
passwords or GUI clicking required.</p>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="footer-wrapper">
      &copy; Brian Buccola. Powered by <a
         href="https://jekyllrb.com/">Jekyll</a> and <a
         href="https://github.com/">GitHub</a>.
    </div>
  </div>
</footer>


  </body>

</html>
